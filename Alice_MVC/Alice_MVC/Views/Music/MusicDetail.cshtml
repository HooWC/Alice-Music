@using Alice_DomainModelEntity.Models;
@model MusicDetail

@{
	ViewData["Title"] = "MusicDetail";
}

<html>
<head>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			user-select: none;
		}

		ul {
			list-style: none;
		}

		a:link, a:visited, a:hover, a:active {
			text-decoration: none;
		}

		.rank-list > ul > li > a, .singer > div > p {
			text-overflow: ellipsis;
			overflow: hidden;
			white-space: nowrap;
		}

			.list-name:hover, .cd-name:hover, .cd-author:hover, .rank-type > a:hover, .rank-list > ul > li > a:hover, .about > a:hover, .user-name:hover, .see-more:hover {
				text-decoration: underline;
			}



		.containerv {
			width: 100%;
			margin: 0;
			padding: 0;
			border-bottom: none;
			overflow: hidden;
			background: black;
			display: flex;
		}

		hr {
			border: 1px solid #c10d0c;
		}

		.recommends {
			background-color: black;
			border-right: 1px #ccc solid;
			width: 90%;
			min-height: 100vh;
			float: left;
			padding: 20px 10px 20px 10px;
			margin: 0 auto;
		}

		.logoimg {
			width: 45px;
		}

		.titlev {
			color: red;
			font-size: 20px;
			font-family: 'Times New Roman', Times, serif;
		}

			.titlev:hover {
				color: red;
			}

		#hot > .title, #new-cd > .title, #rank > .title {
			float: left;
			width: 100px;
		}

		.type {
			overflow: hidden;
			color: #666;
			font-size: 16px;
		}

			.type > li {
				float: left;
				font-weight: bold;
			}

				.type > li > span {
					color: #666;
					line-height: 27px;
					padding: 0 10px;
					vertical-align: middle;
				}

					.type > li > span:hover {
						cursor: pointer;
					}


		.lists {
			overflow: hidden;
			padding-top: 20px;
			padding: 20px 0px 0px 10px;
			margin: 0;
		}

			.lists > li {
				float: left;
				width: 200px;
				height: 200px;
				margin-right: 6px;
			}

				.lists > li img {
					height: 110px;
					margin-bottom: 0.6rem;
				}

		img {
			width: 100%;
		}

		.lists > li.no-right-margin {
			margin: 0;
		}

		.cover {
			background-color: #333;
			opacity: 0.5;
			height: 30px;
			width: 200px;
			position: absolute;
			margin-top: -35px;
		}

			.cover > span {
				display: block;
				float: left;
			}

				.cover > span:last-child {
					float: right;
				}

		.listen {
			display: block;
			background: url(http://s2.music.126.net/style/web2/img/iconall.png) 0 -24px no-repeat;
			height: 11px;
			width: 14px;
			margin: 9px 5px 9px 10px;
		}

		.count {
			font-size: 12px;
			color: #d3d3d3;
			margin: 7px auto;
		}

		.play-btn {
			display: block;
			background: url(http://s2.music.126.net/style/web2/img/iconall.png) 0 0 no-repeat;
			height: 17px;
			width: 16px;
			margin: 7px 10px 7px 0;
		}

		.list-name {
			color: #fff;
			font-size: 14px;
			line-height: 18px;
			display: block;
			transition: all .3s;
		}

			.list-name:hover {
				text-decoration: none;
				color: orangered;
			}

		.type > li:last-child .lastli a {
			color: #fff;
			font-size: 1rem;
			font-family: 'Times New Roman', Times, serif;
		}

		.type > li:last-child .lastli span {
			color: orangered;
			font-size: 1rem;
			font-family: 'Times New Roman', Times, serif;
		}

		.streaming-container {
			display: flex;
			justify-content: space-between;
			width: 100%;
		}

		.right-context {
			float: right;
			width: 20%;
			display: flex;
			flex-direction: column;
		}

		.lists2 {
			overflow: hidden;
			padding-top: 20px;
			margin: 0;
		}

			.lists2 > li {
				float: left;
				width: 200px;
				height: 160px;
				margin-right: 6px;
			}

				.lists2 > li img {
					height: 110px;
					margin-bottom: 0.6rem;
				}

				.lists2 > li.no-right-margin {
					margin: 0;
				}

		.cover2 {
			background-color: #333;
			opacity: 0.8;
			height: 30px;
			width: 200px;
			position: absolute;
			margin-top: -35px;
		}

			.cover2 > span {
				display: block;
				float: left;
			}

				.cover2 > span:last-child {
					float: right;
				}

		.video-context {
			margin: 0 auto;
		}

		* {
			box-sizing: border-box;
		}

		.myimg {
			max-width: 100%;
		}

		.profile__avatarv {
			cursor: pointer;
			border: 0;
			padding: 0;
			background-color: transparent;
		}


		/* Container */
		.containervv {
			text-align: center;
		}

		/* Profile Card */

		.profile--open .profile__avatarv {
			border-radius: 50%;
		}

		.profile__avatarv {
			z-index: 1;
			border-radius: 1.25em;
			overflow: hidden;
			width: 4.5em;
			height: 4.5em;
			margin: 0 auto;
		}

			.profile__avatarv img {
				height: 100%;
				object-fit: cover;
			}


		.ptext {
			font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
			padding: 10px 0 0 0;
			margin: 0;
			color: #fff;
			font-size: 0.7rem;
			transition: all 0.2s;
		}

		.containerv a {
			text-decoration: none;
		}

		.right-side {
			width: 10%;
			display: flex;
			justify-content: center;
			padding-top: 20px;
		}

		.profilev {
			padding: 0 10px;
		}

		.ptext:hover {
			color: orangered;
		}

		/********************************************************************************/

		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
		}

		.text-right {
			text-align: right;
		}

		.comments-app {
			margin: 50px auto;
			max-width: 680px;
			padding: 0 50px;
			width: 100%;
		}

			.comments-app h1 {
				color: #fff;
				margin-bottom: 1.5em;
				text-align: center;
				text-shadow: 0 0 2px rgba(152, 152, 152, 1);
				font-family: 'Times New Roman', Times, serif;
			}

		.comment-form {
		}

			.comment-form .comment-avatar {
			}

			.comment-form .form {
				margin-left: 100px;
			}

				.comment-form .form .form-row {
					margin-bottom: 10px;
				}

					.comment-form .form .form-row:last-child {
						margin-bottom: 0;
					}

				.comment-form .form .input {
					background-color: #fcfcfc;
					border: none;
					border-radius: 4px;
					box-shadow: 0 1px 1px rgba(0, 0, 0, .15);
					color: #555f77;
					font-family: inherit;
					font-size: 14px;
					padding: 5px 10px;
					outline: none;
					width: 100%;
					-webkit-transition: 350ms box-shadow;
					-moz-transition: 350ms box-shadow;
					-ms-transition: 350ms box-shadow;
					-o-transition: 350ms box-shadow;
					transition: 350ms box-shadow;
				}

				.comment-form .form textarea.input {
					height: 100px;
					padding: 15px;
				}

				.comment-form .form label {
					color: #555f77;
					font-family: inherit;
					font-size: 14px;
				}

				.comment-form .form input[type=submit] {
					background-color: #555f77;
					border: none;
					border-radius: 4px;
					box-shadow: 0 1px 1px rgba(0, 0, 0, .15);
					color: #fff;
					cursor: pointer;
					display: block;
					margin-left: auto;
					outline: none;
					padding: 6px 15px;
					-webkit-transition: 350ms box-shadow;
					-moz-transition: 350ms box-shadow;
					-ms-transition: 350ms box-shadow;
					-o-transition: 350ms box-shadow;
					transition: 350ms box-shadow;
				}

					.comment-form .form .input:focus,
					.comment-form .form input[type=submit]:focus,
					.comment-form .form input[type=submit]:hover {
						box-shadow: 0 2px 6px rgba(121, 137, 148, .55);
					}

				.comment-form .form.ng-submitted .input.ng-invalid,
				.comment-form .form .input.ng-dirty.ng-invalid {
					box-shadow: 0 2px 6px rgba(212, 47, 47, .55) !important;
				}

				.comment-form .form .input.disabled {
					background-color: #E8E8E8;
				}



		.comment-form,
		.comment {
			margin-bottom: 20px;
			position: relative;
			z-index: 0;
		}

			.comment-form .comment-avatar,
			.comment .comment-avatar {
				border: 2px solid #fff;
				border-radius: 50%;
				box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
				height: 80px;
				left: 0;
				overflow: hidden;
				position: absolute;
				top: 0;
				width: 80px;
			}

				.comment-form .comment-avatar img,
				.comment .comment-avatar img {
					display: block;
					height: 100%;
					width: 100%;
					object-fit: cover;
				}

			.comment .comment-box {
				background-color: #fcfcfc;
				border-radius: 4px;
				box-shadow: 0 1px 1px rgba(0, 0, 0, .15);
				margin-left: 100px;
				min-height: 60px;
				position: relative;
				padding: 15px;
			}

				.comment .comment-box:before,
				.comment .comment-box:after {
					border-width: 10px 10px 10px 0;
					border-style: solid;
					border-color: transparent #FCFCFC;
					content: "";
					left: -10px;
					position: absolute;
					top: 20px;
				}

				.comment .comment-box:before {
					border-color: transparent rgba(0, 0, 0, .05);
					top: 22px;
				}

			.comment .comment-text {
				color: #555f77;
				font-size: 15px;
				margin-bottom: 25px;
			}

			.comment .comment-footer {
				color: #acb4c2;
				font-size: 13px;
			}

				.comment .comment-footer:after {
					content: "";
					display: table;
					clear: both;
				}

				.comment .comment-footer a {
					color: #acb4c2;
					text-decoration: none;
					-webkit-transition: 350ms color;
					-moz-transition: 350ms color;
					-ms-transition: 350ms color;
					-o-transition: 350ms color;
					transition: 350ms color;
				}

					.comment .comment-footer a:hover {
						color: #555f77;
						text-decoration: underline;
					}

			.comment .comment-info {
				float: left;
				width: 85%;
			}

			.comment .comment-author {
			}

			.comment .comment-date {
			}

				.comment .comment-date:before {
					content: "|";
					margin: 0 10px;
				}

		.comment-actions {
			float: left;
			text-align: right;
			width: 15%;
		}


		* {
			box-sizing: border-box;
		}

		a, a:hover {
			transition: 0.25s color linear;
		}

		img {
			/*filter: grayscale(100%);*/
		}

		article time, article:hover time, .icon-rocknroll, .like-count {
			transition: 0.25s opacity linear;
		}
		/* |--------------------------------- | | Project Start | |--------------------------------- */
		html {
			font-size: 16px;
		}

			html body {
				font-weight: 300;
				line-height: 1.65;
			}

				html body .comments {
					max-width: 450px;
					margin: 50px auto;
				}

					html body .comments article {
						position: relative;
						border-bottom: solid 1px rgba(178, 179, 153, .125);
						margin: 0 auto 50px auto;
					}

						html body .comments article:last-child {
							border: none;
						}

						html body .comments article:hover time {
							opacity: 1;
						}

						html body .comments article img {
							position: absolute;
							top: -10px;
							left: -75px;
							width: 50px;
							height: 50px;
							border-width: 0;
							border-radius: 100%;
							object-fit: cover;
						}

						html body .comments article h4 {
							display: inline-block;
							font-weight: 400;
							margin-bottom: 25px;
						}

							html body .comments article h4 a {
								color: #404040;
								text-decoration: none;
							}

								html body .comments article h4 a:hover {
									color: #bfbfa8;
								}

						html body .comments article time {
							color: #545454;
							margin-left: 1rem;
							text-transform: uppercase;
						}

						html body .comments article .icon-rocknroll {
							color: #545454;
							font-size: 0.85rem;
						}

							html body .comments article .icon-rocknroll:hover {
								opacity: 0.5;
							}

						html body .comments article time, html body .comments article .like-count, html body .comments article .icon-rocknroll {
							font-size: 0.75rem;
							opacity: 0;
						}

						html body .comments article time, html body .comments article .like-count {
							font-weight: 300;
						}

						html body .comments article p {
							margin-bottom: 50px;
						}

							html body .comments article p .reply {
								color: #bfbfa8;
								cursor: pointer;
							}

						html body .comments article .active {
							opacity: 1;
						}

		.like-data {
			float: right;
		}

		.icon-rocknroll {
			background: none;
			border: 0;
			outline: none;
			cursor: pointer;
			margin: 0 0.125rem 0 0;
			padding: 0;
		}

		.comments article:hover .icon-rocknroll, .comments article:hover .like-count {
			opacity: 1;
		}

		@@media (max-width: 650px) {
			.comments {
				width: 100%;
				padding: 0 1rem;
			}

				.comments article {
					width: 90%;
				}

					.comments article #profile-photo {
						position: relative;
						left: -1rem;
						display: inline-block;
						vertical-align: middle;
					}

					.comments article h4 {
						display: inline-block;
						vertical-align: middle;
					}

						.comments article h4 time {
							display: block;
							margin-left: 0 !important;
							opacity: 0.5 !important;
						}
		}


		.fill:hover, .fill:focus {
			box-shadow: inset 0 0 0 2em var(--hover);
		}

		.pulse:hover, .pulse:focus {
			animation: pulse 1s;
			box-shadow: 0 0 0 2em transparent;
		}

		@@keyframes pulse {
			0% {
				box-shadow: 0 0 0 0 var(--hover);
			}
		}


		.pulse {
			--color: #ef6eae;
			--hover: #ef8f6e;
		}

			.pulse:hover, .pulse:focus {
				border-color: var(--hover);
				color: #fff;
			}

		.pulse {
			background: none;
			border: 2px solid;
			font: inherit;
			line-height: 1;
			margin: 0.5em;
			padding: 1em 2em;
			color: var(--color);
			transition: 0.25s;
		}


		.pulse1:hover, .pulse1:focus {
			animation: pulse1 1s;
			box-shadow: 0 0 0 2em transparent;
		}

		@@keyframes pulse1 {
			0% {
				box-shadow: 0 0 0 0 var(--hover);
			}
		}


		.pulse1 {
			--color: #095e96;
			--hover: #30a9d1;
		}

			.pulse1:hover, .pulse1:focus {
				border-color: var(--hover);
				color: #fff;
			}

		.pulse1 {
			background: none;
			border: 2px solid;
			font: inherit;
			line-height: 1;
			margin: 0.5em;
			padding: 1em 2em;
			color: var(--color);
			transition: 0.25s;
		}

		.count-free {
			font-size: 12px;
			color: #d3d3d3;
			margin: 7px auto;
			font-weight: bold;
		}

		.count-vip {
			font-size: 12px;
			color: #d60202;
			margin: 7px auto;
			font-weight: bold;
		}

		.comment-avatar img {
			object-fit: cover;
		}

	</style>
</head>
<body>

	<h1 style="display:none;" id="mcid">@Model.mid</h1>
	<h1 style="display:none;" id="videoid">@ViewBag.VideoID</h1>

	<div class="containerv">
		<div class="recommends">

			<div id="hot">
				<img class="logoimg" src="~/Image/logo.png" alt="Logo"><a class="titlev">Alice <span style="color:white;">Music</span></a>

				<div id="f1">
					<ul class="type">
						<li><span id="btn0">All</span>|</li>
						<li><span id="btn1">Pop</span>|</li>
						<li><span id="btn2">Rock</span>|</li>
						<li><span id="btn3">Soft</span>|</li>
						<li><span id="btn4">Sad</span>|</li>
						<li><span id="btn5">Chinese</span>|</li>
						<li><span id="btn6">English</span>|</li>
						<li><span id="btn7">Japanese</span></li>
						<li id="singerplayname" style="float: right;margin-top: 3px;text-align: center;">
							<div class="lastli">
								<a href="~/Music/SingerDetail?SongID=@Model.singerid">@Model.singer  / </a>
								<span> @Model.SongName</span>
							</div>
						</li>
					</ul>
				</div>

				<hr>

				<div class="streaming-container">
					<div class="video-context">
						<iframe src="@ViewBag.Video"
								width="850" height="438"
								title="YouTube video player" frameborder="0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
								allowfullscreen></iframe>


						<div class="buttons">
							<button class="pulse" id="collect">Collect</button>
						</div>

						<div class="comments-app" ng-app="commentsApp" ng-controller="CommentsController as cmntCtrl">
							<h1>COMMENTS</h1>

							<!-- From -->
							<div class="comment-form">
								<!-- Comment Avatar -->
								<div class="comment-avatar" id="commenthead">
								</div>

								<div class="form">
									<div class="form-row">
										<textarea class="input"
												  ng-model="cmntCtrl.comment.text"
												  placeholder="Add comment..." id="commenttext"
												  required></textarea>
									</div>

									<div class="form-row">
										<input type="submit" id="AddC" value="Add Comment">
									</div>
								</div>
							</div>

							<section id="appcom" class="comments">
							</section>

						</div>
					</div>

					<div class="right-context">
						<ul class="lists2" id="list2">
						</ul>
					</div>
				</div>

				<ul class="lists" id="list1">
				</ul>


			</div>

		</div>


		<div class="right-side">
			<div class="containervv">
			</div>


		</div>


	</div>








	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script>
		$(".Musicpage").css({
			"background": "red",
			"border-radius": "5px"
		});

		$(function () {

			$("#f2").css("display", "none");

			$.ajax({

				type: "GET",
				url: "/Ajax/GetCommentHead",
				dataType: "json",
				success: function (data) {
					console.log(data);
					$("		#commenthead").append(`
																																																																																																																																																																						<img src="/Image/UserHead/${data}"/>
																																																																																																																																																																			`)
				}
			})

			$.ajax({

				type: "POST",
				url: "/Ajax/GetComment",
				dataType: "json",
				data: {
					MusicID: $("#mcid").html()
				},
				success: function (data) {
					$.each(data, function (x, y) {
						$("#appcom").append(`

																																																																																																																																																																																													<article>
																																																																																																																																																																																																<img id="profile-photo" src="/Image/UserHead/${y.head}" />
																																																																																																																																																																																														<h4><a href="#">${y.username}</a></h4>
																																																																																																																																																																																														<time>${y.commenttime}</time>
																																																																																																																																																																																														<like></like>
																																																																																																																																																																																														<p style="color:#fff;">
																																																																																																																																																																																															${y.comment}
																																																																																																																																																																																														</p>
																																																																																																																																																																																											</article>
																																																																																																																																																																																										`)
					})
				}
			})

			$.ajax({
				type: "GET",
				url: `/Ajax/GetRightMusic?MCID=${$("#mcid").html()}`,
				dataType: "json",
				success: function (data) {

					$.each(data, function (x, y) {

						var s = "";
						var page = "";
						if (y.ispaid == "VIP") {
							s = `<span class="count-vip">${y.ispaid}</span>`;
							page = `<li>
																																																																																																																																																																																																														<a href="/Music/AddtoCart?SongID=${y.mid}">
																																																																																																																																																																																																															<img src="${y.songImg}" alt="">
																																																																																																																																																																																																															<div class="cover2">
																																																																																																																																																																																																																<span class="listen"></span>
																																																																																																																																																																																																																${s}
																																																																																																																																																																																																																<span class="play-btn"></span>
																																																																																																																																																																																																															</div>
																																																																																																																																																																																																															<a href="#" class="list-name">${y.singer} - ${y.songName}</a>
																																																																																																																																																																																																												</a>
																																																																																																																																																																																																													</li>`
						} else {
							s = `<span class="count-free">${y.ispaid}</span>`;
							page = `<li>
																																																																																																																																																																																																																							<a href="/Music/MusicDetail?SongID=${y.mid}">
																																																																																																																																																																																																																						<img src="${y.songImg}" alt="">
																																																																																																																																																																																																																						<div class="cover2">
																																																																																																																																																																																																																							<span class="listen"></span>
																																																																																																																																																																																																																							${s}
																																																																																																																																																																																																																							<span class="play-btn"></span>
																																																																																																																																																																																																																						</div>
																																																																																																																																																																																																																						<a href="#" class="list-name">${y.singer} - ${y.songName}</a>
																																																																																																																																																																																																																			</a>
																																																																																																																																																																																																																		</li>`
						}

						$("#list2").append(`

																																																																																																																																																																																																									${page}

																																																																																																																																																																																																								`)


					})
				}
			})

			$.ajax({
				type: "GET",
				url: "/Ajax/GetSingerTake",
				dataType: "json",
				success: function (data) {

					$.each(data, function (x, y) {

						$(".containervv").append(`

																																																																																																																																																																																																																																																																																																																							<a class="		profilev" href="/Music/SingerDetail		?So		ngID=${y.singerID}">
																																																																																																																																																																																																																																																																																																																								<div class="profile__avatarv" id="toggleProfile">
																																																																																																																																																																																																																																																																																																																											<img class="mnimg" src="${y.singerImage}" alt=""/>
																																																																																																																																																																																																																																																																																																																										</div>
																																																																																																																																																																																																																																																																																																																								<p class="ptext">${y.singerName}</p>
																																																																																																																																																																																																																																																																																																																									</a>

																																																																																																																																																																																																																																																																																																																														`)
					})
				}
			})

			$.ajax({
				type: "POST",
				url: "/Ajax/GETCollet",
				dataType: "json",
				data: {
					VideoID: $("#videoid").html()
				},
				success: function (data) {
					if (data == false) {
						$("#collect").attr('class', 'pulse');
						$("#collect").html("Collect");
					} else {
						$("#collect").attr('class', 'pulse1');
						$("#collect").html("Cancel");
					}

				}
			})

			$("#collect").click(function () {
				$.ajax({
					type: "POST",
					url: "/Ajax/GETNewCollet",
					dataType: "json",
					data: {
						VideoID: $("#videoid").html()
					},
					success: function (data) {
						if (data == false) {
							$("#collect").attr('class', 'pulse');
							$("#collect").html("Collect");
						} else {
							$("#collect").attr('class', 'pulse1');
							$("#collect").html("Cancel");
						}

					}
				})
			})

			$("#btn0").click(function () {
				window.location.href = "/Music/Music?songtype=All";
			})

			$("#btn1").click(function () {
				window.location.href = "/Music/Music?songtype=Pop";
			})

			$("#btn2").click(function () {
				window.location.href = "/Music/Music?songtype=Rock";
			})

			$("#btn3").click(function () {
				window.location.href = "/Music/Music?songtype=Soft";
			})

			$("#btn4").click(function () {
				window.location.href = "/Music/Music?songtype=Sad";
			})

			$("#btn5").click(function () {
				window.location.href = "/Music/Music?songtype=Chinese";
			})

			$("#btn6").click(function () {
				window.location.href = "/Music/Music?songtype=English";
			})

			$("#btn7").click(function () {
				window.location.href = "/Music/Music?songtype=Japanese";
			})

			$("#AddC").click(function () {
				if ($("#commenttext").val() == "") {
					$("#commenttext").css("border", "3px solid red")
				} else {

					$("#commenttext").css("border", "3px solid transparent")

					$.ajax({

						type: "POST",
						url: "/Ajax/AddComment",
						dataType: "json",
						data: {
							MusicID: $("#mcid").html(),
							commenttext: $("#commenttext").val()
						},
						success: function (data) {
							$("#commenttext").val("");
							$.each(data, function (x, y) {
								$("#appcom").prepend(`

																																																																																																																																																																																															<article>
																																																																																																																																																																																																		<img id="profile-photo" src="/Image/UserHead/${y.head}" />
																																																																																																																																																																																																<h4><a href="#">${y.username}</a></h4>
																																																																																																																																																																																																<time>${y.commenttime}</time>
																																																																																																																																																																																																<like></like>
																																																																																																																																																																																																<p style="color:#fff;">
																																																																																																																																																																																																	${y.comment}
																																																																																																																																																																																																</p>
																																																																																																																																																																																													</article>
																																																																																																																																																																																												`)
							})

							$("#comme		nttext").val("");


						}
					})
				}
			})


		})
	</script>


</body>
</html>


